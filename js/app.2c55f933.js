(function(){"use strict";var t={4026:function(t,e,n){var i=n(9242),o=n(2578),r=n(5417),a=n(3396);const s={class:"app"},l={class:"app__inner"},u={class:"app__row"};function c(t,e,n,i,o,r){const c=(0,a.up)("app-aside"),m=(0,a.up)("inventory-grid"),d=(0,a.up)("app-bottom");return(0,a.wg)(),(0,a.iD)("div",s,[(0,a._)("div",l,[(0,a._)("div",u,[(0,a.Wm)(c,{class:"app__aside"}),(0,a.Wm)(m)]),(0,a.Wm)(d,{class:"app__bottom"})])])}var m=n.p+"img/app-aside__img.117e338a.jpg";const d={class:"app-aside"},p=(0,a._)("img",{class:"img app-aside__img",src:m,alt:""},null,-1);function v(t,e,n,i,o,r){const s=(0,a.up)("Skeletor");return(0,a.wg)(),(0,a.iD)("div",d,[p,(0,a.Wm)(s,{class:"app-aside__title",width:"100%",height:"40"}),(0,a.Wm)(s,{class:"app-aside__text",width:"90%",height:"10"}),(0,a.Wm)(s,{class:"app-aside__text",width:"100%",height:"10"}),(0,a.Wm)(s,{class:"app-aside__text",width:"95%",height:"10"}),(0,a.Wm)(s,{class:"app-aside__text",width:"90%",height:"10"}),(0,a.Wm)(s,{class:"app-aside__text",width:"85%",height:"10"}),(0,a.Wm)(s,{class:"app-aside__text",width:"50%",height:"10"})])}var f=n(3941),_={components:{Skeletor:f.SJ}},g=n(89);const h=(0,g.Z)(_,[["render",v]]);var y=h,w=n(7139);const b=["data-position"],I=["data-position"],x=["src","alt"],C={class:"inventory-grid__quantity"};function D(t,e,n,i,o,r){const s=(0,a.up)("item-info"),l=(0,a.up)("off-canvas"),u=(0,a.Q2)("mouse-drag");return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{class:(0,w.C_)(["inventory-grid",{grabbing:i.isDragging}]),ref:"wrapperRef"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.inventoryStore.inventory,((t,n)=>((0,a.wg)(),(0,a.iD)(a.HY,null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t,((t,o)=>((0,a.wg)(),(0,a.iD)("div",{key:o,class:"inventory-grid__cell","data-position":`${n}-${o}`},[t?((0,a.wg)(),(0,a.iD)("div",{key:0,"data-position":`${n}-${o}`,class:"inventory-grid__item",onClick:e[0]||(e[0]=(...t)=>i.onItemClick&&i.onItemClick(...t))},[(0,a._)("img",{src:t.img,alt:t.text,class:"inventory-grid__img"},null,8,x),(0,a._)("span",C,(0,w.zw)(t.quantity),1)],8,I)):(0,a.kq)("",!0)],8,b)))),128))],64)))),256)),(0,a.Wm)(l,{modelValue:i.isInfoVisible,"onUpdate:modelValue":e[1]||(e[1]=t=>i.isInfoVisible=t)},{default:(0,a.w5)((()=>[(0,a.Wm)(s)])),_:1},8,["modelValue"])],2)),[[u,{move:i.onDrag,start:i.onStart,end:i.onEnd}]])}var k=n(4870);const W=(0,o.Q_)("inventory",(()=>{const t=(0,k.iH)([[{quantity:5,name:"TOTK",text:"Game of the year 2023",img:"https://dummyimage.com/600x600/000000/ffffff"},{quantity:3,name:"BOTW",text:"Game of the year 2017",img:"https://dummyimage.com/600x600/25dbc6/000000"},{quantity:4,name:"XC2",text:"Game of the year 2018",img:"https://dummyimage.com/600x600/ffffff/000000"},null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null]]);function e(t){null===this.inventory[t.toY][t.toX]?(this.inventory[t.toY][t.toX]=this.inventory[t.fromY][t.fromX],this.inventory[t.fromY][t.fromX]=null):[this.inventory[t.fromY][t.fromX],this.inventory[t.toY][t.toX]]=[this.inventory[t.toY][t.toX],this.inventory[t.fromY][t.fromX]]}const n=(0,k.iH)(""),i=(0,a.Fl)((()=>{if(!n.value)return;const[e,i]=n.value.split("-");return t.value[e][i]}));function o(t){n.value=t}function r(){n.value=""}function s(e){const[o,r]=n.value.split("-"),a=i.value.quantity-e;a>0?t.value[o][r].quantity=a:(n.value="",t.value[o][r]=null)}return{inventory:t,changeItemPosition:e,currentItemAddress:n,getCurrentItem:i,setCurrentItemAddress:o,clearCurrentItemAddress:r,subtractFromCurrentItem:s}}),{persist:!0});var L={mounted(t,e){t.__mouse_move_handler=t=>{e.value.move(t)},t.__mouse_down_handler=n=>{window.addEventListener("mousemove",t.__mouse_move_handler),e.value.start(n)},t.__mouse_up_handler=n=>{window.removeEventListener("mousemove",t.__mouse_move_handler),e.value.end(n)},t.addEventListener("mousedown",t.__mouse_down_handler),window.addEventListener("mouseup",t.__mouse_up_handler)},beforeUnmount(t){window.removeEventListener("mousemove",t.__mouse_move_handler),t.removeEventListener("mousedown",t.__mouse_down_handler),window.removeEventListener("mouseup",t.__mouse_up_handler)}};function V(t,e,n,o,r,s){const l=(0,a.up)("icon-cross"),u=(0,a.up)("icon-base");return(0,a.wg)(),(0,a.j4)(i.uT,{name:`slide-from-${n.position}`},{default:(0,a.w5)((()=>[n.modelValue?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,w.C_)(["offcanvas",n.position]),style:(0,w.j5)(`--offcanvas-width: ${n.maxWidth}`)},[(0,a.WI)(t.$slots,"default",{class:"offcanvas__inner"}),(0,a._)("button",{onClick:e[0]||(e[0]=(...t)=>o.closeOffcanvas&&o.closeOffcanvas(...t)),class:"offcanvas__close",type:"button"},[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(l)])),_:1})])],6)):(0,a.kq)("",!0)])),_:3},8,["name"])}const S=["width","height"],Y=["fill"];function O(t,e,n,i,o,r){return(0,a.wg)(),(0,a.iD)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon-base",width:r._width,height:r._height,viewBox:"0 0 24 24",role:"presentation"},[(0,a._)("g",{fill:n.iconColor},[(0,a.WI)(t.$slots,"default")],8,Y)],8,S)}var q={props:{iconLang:String,width:[Number,String],height:[Number,String],size:{type:[Number,String],default:24},iconColor:{type:String,default:"currentColor"}},computed:{_width(){return this.width||this.size},_height(){return this.height||this.size}}};const $=(0,g.Z)(q,[["render",O]]);var H=$;const X={d:"M18 7.05L16.95 6L12 10.95L7.05 6L6 7.05L10.95 12L6 16.95L7.05 18L12 13.05L16.95 18L18 16.95L13.05 12L18 7.05Z"};function j(t,e){return(0,a.wg)(),(0,a.iD)("path",X)}const B={},E=(0,g.Z)(B,[["render",j]]);var F=E,Z={components:{IconBase:H,IconCross:F},props:{modelValue:Boolean,maxWidth:{type:String,default:"25rem"},position:{type:String,default:"right"}},emits:["update:modelValue"],setup(t,{emit:e}){const{modelValue:n,maxWidth:i,position:o}=(0,k.BK)(t);function r(){e("update:modelValue",!1)}return(0,a.YP)(n,(t=>{t&&"right"===o.value&&document.querySelector(":root").style.setProperty("--slide-from-right-distance",i.value)})),{closeOffcanvas:r}}};const A=(0,g.Z)(Z,[["render",V]]);var M=A;const R={class:"item-info"},z={class:"item-info__filler"},P={class:"item-info__content"},T={class:"item-info__img-wrapper"},K=["src"],N=(0,a._)("div",{class:"item-info__separator","aria-hidden":"true"},null,-1),Q={class:"item-info__name"},G={class:"item-info__bottom"},U=(0,a._)("div",{class:"item-info__separator","aria-hidden":"true"},null,-1),J=["max"],tt={class:"item-info__row"};function et(t,e,n,o,r,s){return(0,a.wg)(),(0,a.iD)("div",R,[(0,a._)("div",z,[(0,a._)("div",P,[(0,a._)("div",T,[(0,a._)("img",{src:o.currentItem.img,alt:"",class:"item-info__img"},null,8,K)]),N,(0,a._)("span",Q,(0,w.zw)(o.currentItem.name),1),((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(4,(t=>(0,a._)("span",{key:t,class:"item-info__text"},(0,w.zw)(o.currentItem.text),1))),64))])]),(0,a._)("div",G,[o.removeItemDialogVisible?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[U,(0,a._)("button",{onClick:e[0]||(e[0]=(...t)=>o.toggleRemoveDialogVisibility&&o.toggleRemoveDialogVisibility(...t)),class:"btn btn_color_red item-info__remove",type:"button"}," Удалить предмет ")],64)),o.removeItemDialogVisible?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.removeQuantity=t),min:"1",max:o.currentItem.quantity,onInput:e[2]||(e[2]=(...t)=>o.onInput&&o.onInput(...t)),class:"input",type:"number",placeholder:"Введите количество"},null,40,J),[[i.nr,o.removeQuantity]]),(0,a._)("div",tt,[(0,a._)("button",{onClick:e[3]||(e[3]=(...t)=>o.toggleRemoveDialogVisibility&&o.toggleRemoveDialogVisibility(...t)),class:"btn btn_small",type:"button"}," Отмена "),(0,a._)("button",{onClick:e[4]||(e[4]=(...t)=>o.subtractFromItem&&o.subtractFromItem(...t)),class:"btn btn_small btn_color_red",type:"button"}," Подтвердить ")])],64)):(0,a.kq)("",!0)])])}var nt={setup(){const t=W(),e=(0,a.Fl)((()=>t.getCurrentItem)),n=(0,k.iH)(!1);function i(){n.value=!n.value}const o=(0,k.iH)("");function r(){t.subtractFromCurrentItem(o.value)}function s(t){const n=Math.min(Math.max(1,parseInt(t.target.value)||1),e.value.quantity);o.value=n}return{currentItem:e,removeItemDialogVisible:n,toggleRemoveDialogVisibility:i,removeQuantity:o,subtractFromItem:r,onInput:s}}};const it=(0,g.Z)(nt,[["render",et]]);var ot=it,rt={components:{OffCanvas:M,ItemInfo:ot},directives:{mouseDrag:L},setup(){const t=W(),e=(0,k.iH)(null),n=(0,k.iH)(null),i=(0,k.qj)({x:0,y:0}),o=(0,k.qj)({width:0,height:0}),r=(0,a.Fl)((()=>Boolean(e.value)));function s(t){if(!e.value)return;e.value.classList.contains("visible")||e.value.classList.add("visible");const{top:r,right:a,bottom:s,left:l}=n.value.getBoundingClientRect(),u=Math.max(Math.min(t.x-i.x,a-o.width),l),c=Math.max(Math.min(t.y-i.y,s-o.height),r);e.value.style.transform=`translate(${u}px, ${c}px)`}function l(t){1===t.which&&t.target.classList.contains("inventory-grid__item")&&(i.x=t.offsetX,i.y=t.offsetY,o.width=t.target.clientWidth,o.height=t.target.clientHeight,e.value=t.target.cloneNode(!0),e.value.style.width=`${o.width}px`,e.value.style.height=`${o.height}px`,e.value.classList.add("inventory-grid__avatar"),n.value.appendChild(e.value))}function u(n){if(!e.value)return;if(e.value.remove(),!n.target.dataset.position)return;const[i,o]=e.value.dataset.position.split("-"),[r,a]=n.target.dataset.position.split("-");e.value=null,i===r&&o===a||t.changeItemPosition({fromY:i,fromX:o,toY:r,toX:a})}function c(e){const[n,i]=e.target.dataset.position.split("-");t.setCurrentItemAddress(`${n}-${i}`)}const m=(0,a.Fl)({get(){return!!t.getCurrentItem},set(e){e||t.clearCurrentItemAddress()}});return{copyNode:e,wrapperRef:n,inventoryStore:t,isDragging:r,onDrag:s,onStart:l,onEnd:u,onItemClick:c,isInfoVisible:m}}};const at=(0,g.Z)(rt,[["render",D]]);var st=at;const lt={class:"app-bottom"},ut={class:"app-bottom__close",type:"button"};function ct(t,e,n,i,o,r){const s=(0,a.up)("Skeletor"),l=(0,a.up)("icon-cross"),u=(0,a.up)("icon-base");return(0,a.wg)(),(0,a.iD)("div",lt,[(0,a.Wm)(s,{class:"app-aside__content",width:"100%",height:"36"}),(0,a._)("button",ut,[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(l)])),_:1})])])}var mt={components:{Skeletor:f.SJ,IconBase:H,IconCross:F}};const dt=(0,g.Z)(mt,[["render",ct]]);var pt=dt,vt={name:"App",components:{AppAside:y,InventoryGrid:st,AppBottom:pt},setup(){return{}}};const ft=(0,g.Z)(vt,[["render",c]]);var _t=ft;const gt=(0,o.WB)();gt.use(r.Z);const ht=(0,i.ri)(_t);ht.use(gt),ht.mount("#app")}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var r=e[i]={exports:{}};return t[i].call(r.exports,r,r.exports,n),r.exports}n.m=t,function(){var t=[];n.O=function(e,i,o,r){if(!i){var a=1/0;for(c=0;c<t.length;c++){i=t[c][0],o=t[c][1],r=t[c][2];for(var s=!0,l=0;l<i.length;l++)(!1&r||a>=r)&&Object.keys(n.O).every((function(t){return n.O[t](i[l])}))?i.splice(l--,1):(s=!1,r<a&&(a=r));if(s){t.splice(c--,1);var u=o();void 0!==u&&(e=u)}}return e}r=r||0;for(var c=t.length;c>0&&t[c-1][2]>r;c--)t[c]=t[c-1];t[c]=[i,o,r]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.p="/Vue-3-inventory/"}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,i){var o,r,a=i[0],s=i[1],l=i[2],u=0;if(a.some((function(e){return 0!==t[e]}))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(l)var c=l(n)}for(e&&e(i);u<a.length;u++)r=a[u],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return n.O(c)},i=self["webpackChunkvue3"]=self["webpackChunkvue3"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(4026)}));i=n.O(i)})();
//# sourceMappingURL=app.2c55f933.js.map